@model PermissionModel
@if (Model.Groups.Any())
{
    <div class="form-group">
        <div class="col-lg-2"></div>
        <div class="col-lg-10">
            <h4>Разрешенные действия:</h4>
            <input type="hidden" name="PermissionList" id="PermissionList" value="@Model.TargetPermissions" />
            <select id='optgroup' multiple='multiple'>
                
                @foreach (var g in Model.Groups)
                {
                    <optgroup label='@g.Name' arg="@g.ID">
                        @foreach (var allowed in g.AllowedPermissions)
                        {
                            <option @(allowed.IsAdded ? "selected" : "") value='@allowed.ID'>@allowed.Name</option>
                        }
                    </optgroup>

                }
            </select>
        </div>
    </div>

}